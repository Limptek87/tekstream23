<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<title>TEKSTREAM 23 ‚Äì LIMPTEK</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
html,body{
margin:0;
background:black;
color:#0f0;
font-family:monospace;
}

#ui{
max-width:420px;
margin:auto;
padding:16px;
text-align:center;
}

.logo{width:90px;margin-bottom:6px;}

h1{
font-size:32px;
letter-spacing:3px;
text-shadow:0 0 14px #0f0;
margin:6px 0;
}

.subtitle{opacity:.8;margin-bottom:10px;}

audio{
width:100%;
filter:invert(1) hue-rotate(90deg);
}

.controls{
display:flex;
justify-content:space-between;
margin:10px 0;
}

.controls button{
flex:1;
margin:0 4px;
background:black;
color:#0f0;
border:1px solid #0f0;
padding:10px;
font-size:16px;
cursor:pointer;
box-shadow:0 0 10px #0f0;
}

.controls button.active{
background:#0f0;
color:black;
}

#playlist{
border:1px solid #0f0;
padding:6px;
max-height:260px;
overflow-y:auto;
font-size:13px;
}

#playlist div{
padding:6px;
cursor:pointer;
opacity:.75;
}

#playlist div.active{
background:#0f0;
color:black;
opacity:1;
}

#playlist div:hover{opacity:1}

/* üì± MOBILE tweaks */
@media (max-width:600px){
 h1{font-size:26px;}
 .controls button{font-size:18px;padding:12px;}
 #playlist{max-height:180px;}
}
</style>
</head>

<body>

<div id="ui">
<img src="logo.png" class="logo">

<h1>TEKSTREAM 23</h1>
<div class="subtitle">vinyl only ¬∑ 24/7 ¬∑ free download ¬∑ no edits</div>

<audio id="player" controls crossorigin="anonymous"></audio>

<div class="controls">
<button id="prev">‚èÆ</button>
<button id="shuffle">SHUFFLE</button>
<button id="next">‚è≠</button>
</div>

<div id="playlist">Loading tracks‚Ä¶</div>
</div>

<script>
const ITEM="tekstream232311";
const audio=document.getElementById("player");
const playlist=document.getElementById("playlist");
const prev=document.getElementById("prev");
const next=document.getElementById("next");
const shuffleBtn=document.getElementById("shuffle");

let tracks=[],order=[],pos=0,shuffle=false;

/* load all mp3 */
fetch(`https://archive.org/metadata/${ITEM}`)
.then(r=>r.json())
.then(d=>{
 tracks=d.files.filter(f=>f.name.endsWith(".mp3"));
 buildOrder();
 render();
 play(0);
});

function buildOrder(){
 order=[...tracks.keys()];
 if(shuffle) shuffleOrder(order);
}

function shuffleOrder(a){
 for(let i=a.length-1;i>0;i--){
  const j=Math.floor(Math.random()*(i+1));
  [a[i],a[j]]=[a[j],a[i]];
 }
}

function render(){
 playlist.innerHTML="";
 order.forEach((i,n)=>{
  const row=document.createElement("div");
  row.textContent=tracks[i].name;
  row.onclick=()=>play(n);
  playlist.appendChild(row);
 });
}

function highlight(){
 [...playlist.children].forEach((e,i)=>e.classList.toggle("active",i===pos));
}

function play(n){
 pos=(n+order.length)%order.length;
 audio.src=`https://archive.org/download/${ITEM}/${tracks[order[pos]].name}`;
 audio.play();
 highlight();
}

audio.onended=()=>play(pos+1);

prev.onclick=()=>play(pos-1);
next.onclick=()=>play(pos+1);

shuffleBtn.onclick=()=>{
 shuffle=!shuffle;
 shuffleBtn.classList.toggle("active",shuffle);
 buildOrder();
 render();
 play(0);
};
</script>

</body>
</html>
