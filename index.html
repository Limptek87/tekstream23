<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<title>TEKSTREAM 23 – LIMPTEK</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
html,body{
margin:0;
height:100%;
background:black;
color:#0f0;
font-family:monospace;
overflow:hidden
}

#viz{
position:fixed;
inset:0;
z-index:-1;
}

#ui{
position:absolute;
top:20px;
left:50%;
transform:translateX(-50%);
text-align:center;
}

audio{
width:320px;
filter:invert(1) hue-rotate(90deg);
opacity:.85;
}

.logo{
width:110px;
margin:20px auto;
display:block;
}

/* ===== MATRIX BUTTON ===== */

#fs{
margin-top:14px;
background:black;
color:#0f0;
border:1px solid #0f0;
padding:6px 16px;
font-family:monospace;
cursor:pointer;
box-shadow:0 0 12px rgba(0,255,0,.45);
letter-spacing:1px;
}

#fs:hover{
background:#0f0;
color:black;
box-shadow:0 0 18px rgba(0,255,0,.9);
}
</style>

<script src="https://unpkg.com/butterchurn/lib/butterchurn.min.js"></script>
<script src="https://unpkg.com/butterchurn-presets/lib/butterchurnPresets.min.js"></script>
</head>

<body>

<canvas id="viz"></canvas>

<div id="ui">
<img src="logo.png" class="logo">

<audio id="player" controls crossorigin="anonymous">
<source src="https://archive.org/download/tekstream232311/TEKSTREAM23.mp3" type="audio/mpeg">
</audio>

<button id="fs">VISUALS FULLSCREEN</button>

<p>vinyl only · 23 · no sync · no edits</p>
</div>

<script>
const audio = document.getElementById("player");
const canvas = document.getElementById("viz");

const ctx = new (window.AudioContext || window.webkitAudioContext)();
const src = ctx.createMediaElementSource(audio);
const analyser = ctx.createAnalyser();
src.connect(analyser);
analyser.connect(ctx.destination);

const viz = butterchurn.createVisualizer(ctx, canvas,{
width:window.innerWidth,
height:window.innerHeight
});

const presets = butterchurnPresets.getPresets();
viz.loadPreset(presets["Flexi - Alien Tech"],0.0);

function resize(){
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
viz.setRendererSize(canvas.width,canvas.height);
}
window.addEventListener("resize",resize);
resize();

function render(){
requestAnimationFrame(render);
viz.render();
}
render();

audio.onplay = () => ctx.resume();

/* ===== FULLSCREEN TOGGLE ===== */

const fsBtn = document.getElementById("fs");

fsBtn.onclick = () => {
  if (!document.fullscreenElement) {
    canvas.requestFullscreen();
  } else {
    document.exitFullscreen();
  }
};
</script>

</body>
</html>
