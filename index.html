<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<title>TEKSTREAM 23 – LIMPTEK</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
html,body{
margin:0;height:100%;
background:black;color:#0f0;
font-family:monospace;
}

#ui{
max-width:380px;
margin:20px auto;
text-align:center;
}

.logo{
width:100px;
margin-bottom:10px;
}

h1{
margin:6px 0;
font-size:34px;
letter-spacing:3px;
text-shadow:0 0 14px #0f0;
}

.subtitle{
font-size:14px;
opacity:.8;
margin-bottom:10px;
}

audio{
width:100%;
filter:invert(1) hue-rotate(90deg);
margin-bottom:8px;
}

.controls button{
background:black;
color:#0f0;
border:1px solid #0f0;
padding:6px 12px;
margin:4px;
cursor:pointer;
box-shadow:0 0 10px #0f0;
}

.controls button.active{
background:#0f0;
color:black;
}

#playlist{
margin-top:10px;
max-height:260px;
overflow-y:auto;
border:1px solid #0f0;
padding:6px;
font-size:13px;
}

#playlist div{
padding:4px;
cursor:pointer;
opacity:.7;
}

#playlist div.active{
background:#0f0;
color:black;
opacity:1;
}

#playlist div:hover{opacity:1;}
</style>
</head>

<body>

<div id="ui">
<img src="logo.png" class="logo">

<h1>TEKSTREAM 23</h1>
<div class="subtitle">vinyl only · 24/7 · freetek · no edits</div>

<audio id="player" controls crossorigin="anonymous"></audio>

<div class="controls">
<button id="prev">⏮</button>
<button id="next">⏭</button>
<button id="shuffle">SHUFFLE</button>
</div>

<div id="playlist">Loading tracks…</div>
</div>

<script>
const ITEM="tekstream232311";
const audio=document.getElementById("player");
const playlist=document.getElementById("playlist");
const prev=document.getElementById("prev");
const next=document.getElementById("next");
const shuffleBtn=document.getElementById("shuffle");

let original=[],queue=[],index=0,shuffle=false;

/* Load MP3 list from Archive */
fetch(`https://archive.org/metadata/${ITEM}`)
.then(r=>r.json())
.then(data=>{
 original=data.files.filter(f=>f.name.toLowerCase().endsWith(".mp3"));
 resetQueue();
 buildPlaylist();
 play(0);
});

function resetQueue(){
 queue=[...original];
 if(shuffle) shuffleArray(queue);
}

function shuffleArray(a){
 for(let i=a.length-1;i>0;i--){
  const j=Math.floor(Math.random()*(i+1));
  [a[i],a[j]]=[a[j],a[i]];
 }
}

function buildPlaylist(){
 playlist.innerHTML="";
 queue.forEach((t,i)=>{
  const row=document.createElement("div");
  row.textContent=t.name;
  row.onclick=()=>play(i);
  playlist.appendChild(row);
 });
}

function highlight(){
 [...playlist.children].forEach((el,i)=>{
  el.classList.toggle("active",i===index);
 });
}

function play(i){
 if(!queue.length) return;
 index=(i+queue.length)%queue.length;
 audio.src=`https://archive.org/download/${ITEM}/${queue[index].name}`;
 audio.play();
 highlight();
}

audio.onended=()=>play(index+1);

prev.onclick=()=>play(index-1);
next.onclick=()=>play(index+1);

shuffleBtn.onclick=()=>{
 shuffle=!shuffle;
 shuffleBtn.classList.toggle("active",shuffle);
 resetQueue();
 buildPlaylist();
 play(0);
};
</script>

</body>
</html>
